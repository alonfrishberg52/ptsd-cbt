<!-- Audit Log Page -->
<div class="page-header">
    <h2><i class="fa-solid fa-clipboard-list"></i> Audit Log</h2>
</div>
<div class="search-filter-bar">
    <input type="text" id="search-audit" placeholder="Search audit log...">
    <select id="filter-audit-type">
        <option value="all">All Types</option>
        <option value="plan">Plan</option>
        <option value="story">Story</option>
        <option value="patient">Patient</option>
        <option value="therapist">Therapist</option>
    </select>
</div>
<table class="patient-table">
    <thead>
        <tr>
            <th>Date</th>
            <th>Action</th>
            <th>Details</th>
            <th>Therapist</th>
        </tr>
    </thead>
    <tbody id="audit-log-table">
        <!-- Audit log entries will be loaded here -->
    </tbody>
</table>
<script src="/static/dashboard/js/audit.js"></script>

{% extends 'dashboard/base.html' %}
{% block title %}לוג{% endblock %}
{% block content %}
<div class="card mt-4">
    <div class="card-header">יומן פעולות</div>
    <div class="card-body p-0">
        <table class="table table-striped mb-0">
            <thead>
                <tr>
                    <th>תאריך</th>
                    <th>משתמש</th>
                    <th>פעולה</th>
                    <th>פרטים</th>
                </tr>
            </thead>
            <tbody>
                {% for log in audit_logs %}
                <tr>
                    <td>{{ log.timestamp }}</td>
                    <td>{{ log.user or '' }}</td>
                    <td>{{ log.action or '' }}</td>
                    <td>{{ log.details or '' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %} 